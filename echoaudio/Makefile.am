# # Process this file with automake to produce Makefile.in.
firmware_files =	\
		loader_dsp.fw \
		darla20_dsp.fw \
		gina20_dsp.fw \
		layla20_dsp.fw \
		layla20_asic.fw \
		darla24_dsp.fw \
		gina24_301_dsp.fw \
		gina24_301_asic.fw \
		gina24_361_dsp.fw \
		gina24_361_asic.fw \
		layla24_dsp.fw \
		layla24_1_asic.fw \
		layla24_2A_asic.fw \
		layla24_2S_asic.fw \
		mona_301_dsp.fw \
		mona_301_1_asic_48.fw \
		mona_301_1_asic_96.fw \
		mona_361_dsp.fw \
		mona_361_1_asic_48.fw \
		mona_361_1_asic_96.fw \
		mona_2_asic.fw \
		mia_dsp.fw \
		echo3g_dsp.fw \
		3g_asic.fw \
		indigo_dsp.fw \
		indigo_io_dsp.fw \
		indigo_iox_dsp.fw \
		indigo_dj_dsp.fw \
		indigo_djx_dsp.fw

noinst_PROGRAMS = fw_writer
fw_writer_SOURCES = fw_writer.c

EXTRA_DIST = 	DSP/LoaderDSP.c \
		DSP/Darla20DSP.c \
		DSP/Gina20DSP.c \
		DSP/Layla20DSP.c \
		ASIC/LaylaASIC.c \
		DSP/Darla24DSP.c \
		ASIC/Gina24ASIC.c \
		ASIC/Gina24ASIC_361.c \
		DSP/Gina24DSP.c \
		DSP/Gina24_361DSP.c \
		DSP/Layla24DSP.c \
		ASIC/Layla24_1ASIC.c \
		ASIC/Layla24_2A_ASIC.c \
		ASIC/Layla24_2S_ASIC.c \
		DSP/MonaDSP.c \
		DSP/Mona361DSP.c \
		ASIC/Mona1ASIC48.c \
		ASIC/Mona1ASIC96.c \
		ASIC/Mona1ASIC48_361.c \
		ASIC/Mona1ASIC96_361.c \
		ASIC/Mona2ASIC.c \
		DSP/MiaDSP.c \
		DSP/Echo3gDSP.c \
		ASIC/3G_ASIC.c \
		DSP/IndigoDSP.c \
		DSP/IndigoIODSP.c \
		DSP/IndigoIOxDSP.c \
		DSP/IndigoDJDSP.c \
		DSP/IndigoDJxDSP.c \
		fw_writer.c \
		license.txt

CLEANFILES = $(firmware_files) fw_writer

if USE_HOTPLUG
hotplugfwdir = @HOTPLUGFWDIR@/ea
hotplugfw_DATA = $(firmware_files)
else
hotplugfwdir =
hotplugfw_DATA = 
endif

LINK_FOR_BUILD = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)

$(fw_writer_OBJECTS) : CC=$(CC_FOR_BUILD)
$(fw_writer_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
$(fw_writer_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)

fw_writer: $(fw_writer_OBJECTS)
	$(LINK_FOR_BUILD) $^ $(LDLIBS_FOR_BUILD) -o $@

$(firmware_files): fw_writer
	./fw_writer DSP/LoaderDSP.c loader_dsp.fw
	./fw_writer DSP/Darla20DSP.c darla20_dsp.fw
	./fw_writer DSP/Gina20DSP.c gina20_dsp.fw
	./fw_writer DSP/Layla20DSP.c layla20_dsp.fw
	./fw_writer ASIC/LaylaASIC.c layla20_asic.fw
	./fw_writer DSP/Darla24DSP.c darla24_dsp.fw
	./fw_writer DSP/Gina24DSP.c gina24_301_dsp.fw
	./fw_writer ASIC/Gina24ASIC.c gina24_301_asic.fw
	./fw_writer DSP/Gina24_361DSP.c gina24_361_dsp.fw
	./fw_writer ASIC/Gina24ASIC_361.c gina24_361_asic.fw
	./fw_writer DSP/Layla24DSP.c layla24_dsp.fw
	./fw_writer ASIC/Layla24_1ASIC.c layla24_1_asic.fw
	./fw_writer ASIC/Layla24_2A_ASIC.c layla24_2A_asic.fw
	./fw_writer ASIC/Layla24_2S_ASIC.c layla24_2S_asic.fw
	./fw_writer DSP/MonaDSP.c mona_301_dsp.fw
	./fw_writer ASIC/Mona1ASIC48.c mona_301_1_asic_48.fw
	./fw_writer ASIC/Mona1ASIC96.c mona_301_1_asic_96.fw
	./fw_writer DSP/Mona361DSP.c mona_361_dsp.fw
	./fw_writer ASIC/Mona1ASIC48_361.c mona_361_1_asic_48.fw
	./fw_writer ASIC/Mona1ASIC96_361.c mona_361_1_asic_96.fw
	./fw_writer ASIC/Mona2ASIC.c mona_2_asic.fw
	./fw_writer DSP/MiaDSP.c mia_dsp.fw
	./fw_writer DSP/Echo3gDSP.c echo3g_dsp.fw
	./fw_writer ASIC/3G_ASIC.c 3g_asic.fw
	./fw_writer DSP/IndigoDSP.c indigo_dsp.fw
	./fw_writer DSP/IndigoIODSP.c indigo_io_dsp.fw
	./fw_writer DSP/IndigoIOxDSP.c indigo_iox_dsp.fw
	./fw_writer DSP/IndigoDJDSP.c indigo_dj_dsp.fw
	./fw_writer DSP/IndigoDJxDSP.c indigo_djx_dsp.fw
